# =============================================================================
# Gateway Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=4000

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# IMPORTANT: Include connection pool parameters for stability!
# 
# For Development (local PostgreSQL):
DATABASE_URL="postgresql://username:password@localhost:5432/dbname?connection_limit=10&pool_timeout=20&connect_timeout=10"
#
# For Production (Render, AWS RDS, Railway, etc.):
# DATABASE_URL="postgresql://username:password@host:5432/dbname?connection_limit=20&pool_timeout=30&connect_timeout=15&socket_timeout=30"
#
# For Supabase (use Transaction mode with pgbouncer):
# DATABASE_URL="postgresql://postgres:[PASSWORD]@[PROJECT-REF].supabase.co:6543/postgres?pgbouncer=true&connection_limit=10"
#
# See gateway/DATABASE_CONNECTION_GUIDE.md for detailed configuration

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET="your-super-secret-jwt-key-min-16-chars"
JWT_ISSUER="customer-portal"
JWT_AUDIENCE="customer-portal-clients"

# -----------------------------------------------------------------------------
# Encryption (for storing OAuth tokens securely)
# -----------------------------------------------------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY="your-32-character-or-longer-encryption-key-here"

# -----------------------------------------------------------------------------
# WebSocket / Realtime
# -----------------------------------------------------------------------------
# For local dev:
WEBSOCKET_PUBLIC_URL="ws://localhost:4000"
# For production:
# WEBSOCKET_PUBLIC_URL="wss://your-gateway-domain.com"

# -----------------------------------------------------------------------------
# Supabase Storage (Optional - for file uploads)
# -----------------------------------------------------------------------------
# Get these from your Supabase project settings
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_ANON_KEY="your-supabase-anon-key"
SUPABASE_BUCKET="uploads"

# -----------------------------------------------------------------------------
# YouTube OAuth (Optional - if using YouTube provider)
# -----------------------------------------------------------------------------
# Get these from Google Cloud Console
YOUTUBE_CLIENT_ID="your-youtube-client-id.apps.googleusercontent.com"
YOUTUBE_CLIENT_SECRET="your-youtube-client-secret"
YOUTUBE_REDIRECT_URI="http://localhost:3000/api/oauth/youtube/callback"
# For production:
# YOUTUBE_REDIRECT_URI="https://your-frontend-domain.com/api/oauth/youtube/callback"

# -----------------------------------------------------------------------------
# Admin Configuration
# -----------------------------------------------------------------------------
# The email address that should have ADMIN role
ADMIN_EMAIL="admin@yourdomain.com"
# Optional: A read-only admin viewer
ADMIN_VIEWER_EMAIL="viewer@yourdomain.com"

# -----------------------------------------------------------------------------
# Stripe (for billing/payments)
# -----------------------------------------------------------------------------
# Get these from Stripe Dashboard
STRIPE_SECRET_KEY="sk_test_..."
# Webhook secret for verifying Stripe webhooks
STRIPE_WEBHOOK_SECRET="whsec_..."

# -----------------------------------------------------------------------------
# Redis (Optional - for advanced queue management)
# -----------------------------------------------------------------------------
# If not provided, in-memory queue is used
# REDIS_URL="redis://localhost:6379"
# For Redis Cloud or Upstash:
# REDIS_URL="rediss://default:password@host:6379"

# -----------------------------------------------------------------------------
# Error Tracking (Optional)
# -----------------------------------------------------------------------------
# Sentry DSN for error monitoring
# SENTRY_DSN="https://...@sentry.io/..."

# -----------------------------------------------------------------------------
# Email (for password reset functionality)
# -----------------------------------------------------------------------------
# Gmail App Password (recommended for ease of setup)
# See: https://support.google.com/accounts/answer/185833
GMAIL_USER="your-email@gmail.com"
GMAIL_APP_PASSWORD="your-16-char-app-password"
EMAIL_FROM="noreply@yourdomain.com"

# Frontend URL (for password reset links)
FRONTEND_BASE_URL="http://localhost:3000"
# For production:
# FRONTEND_BASE_URL="https://your-frontend-domain.com"

# =============================================================================
# Quick Setup Checklist
# =============================================================================
# 
# Essential (Required):
# [ ] DATABASE_URL with connection pool parameters
# [ ] JWT_SECRET (16+ characters)
# [ ] ENCRYPTION_KEY (32+ characters)
# [ ] WEBSOCKET_PUBLIC_URL
# 
# Important (Highly Recommended):
# [ ] ADMIN_EMAIL
# [ ] STRIPE_SECRET_KEY and STRIPE_WEBHOOK_SECRET
# [ ] SUPABASE credentials (if using file uploads)
# 
# Optional (As Needed):
# [ ] YOUTUBE OAuth credentials
# [ ] Email settings (for password reset)
# [ ] REDIS_URL (for production scaling)
# [ ] SENTRY_DSN (for error tracking)
# 
# =============================================================================

